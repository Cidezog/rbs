<div class="row">
	<h2><i18n>rbs.booking.new</i18n></h2>
	<article class="twelve cell">

		<h3><i18n>rbs.booking.title.resource</i18n></h3>

		<div class="row" ng-if="editedBooking.id === undefined">
			<div class="six cell form-element">
				<label class="row"><i18n>rbs.booking.edit.type.label</i18n></label>
				<select class="row" ng-model="editedBooking.type" ng-options="resourceType.name for resourceType in resourceTypes.filterAvailable()" ng-change="autoSelectResource()" required>
				</select>
			</div>
			<div class="six cell form-element">
				<label class="row"><i18n>rbs.booking.edit.resource.label</i18n></label>
				<select class="row" ng-model="editedBooking.resource" ng-options="resource.name for resource in editedBooking.type.resources.filterAvailable()" required>
				</select>
			</div>
		</div>
		<div class="row" ng-if="editedBooking.id !== undefined">
			<div class="six cell form-element">
				<label class="row"><i18n>rbs.booking.edit.type.label</i18n></label>
				<input class="row disabled" type="text" disabled value="[[editedBooking.resource.type.name]]"/>
			</div>
			<div class="six cell form-element">
				<label class="row"><i18n>rbs.booking.edit.resource.label</i18n></label>
				<input class="row disabled" type="text" disabled value="[[editedBooking.resource.name]]"/>
			</div>
		</div>
		<hr />

		<div class="row form-element">
			<label class="twelve cell"><i18n>rbs.booking.edit.description.label</i18n></label>
			<div bind-html="editedBooking.resource.description" class="twelve cell uneditable form-element"></div>
		</div>
		<hr />

		<h3><i18n>rbs.booking.title.booking</i18n></h3>

		<div class="row" ng-if="editedBooking.resource.periodic_booking === true">
			<label class="three cell form-element"><i18n>rbs.booking.edit.periodic_booking.label</i18n></label>
			<label class="cell form-element">
				<i18n>rbs.booking.edit.periodic_booking.true</i18n>
				<input type="radio" name="periodic_booking" data-ng-model="editedBooking.is_periodic" ng-value="true" />
			</label>
			<label class="cell form-element">
				<i18n>rbs.booking.edit.periodic_booking.false</i18n>
				<input type="radio" name="periodic_booking" data-ng-model="editedBooking.is_periodic" ng-value="false" checked />
			</label>
		</div>
		<hr />

		<!-- Non Periodic Booking dates and hours -->
		<div class="row" ng-if="editedBooking.is_periodic !== true">
			<div class="six cell">
				<label class="three cell form-label"><i18n>rbs.booking.edit.start.label</i18n></label>
				<date-picker class="four cell" ng-model="editedBooking.startDate" ng-change="showDate = true" required></date-picker>
				<label class="one cell form-label"><i18n>rbs.booking.edit.start.hour</i18n></label>
				<select class="three cell" ng-model="editedBooking.startTime" ng-options="hourMinutes.name for hourMinutes in times" required>
				</select>
			</div>
			<div class="six cell">
				<label class="two cell form-label"><i18n>rbs.booking.edit.end.label</i18n></label>
				<date-picker class="four cell" ng-model="editedBooking.endDate" ng-change="showDate = true" required></date-picker>
				<label class="one cell form-label"><i18n>rbs.booking.edit.end.hour</i18n></label>
				<select class="three cell" ng-model="editedBooking.endTime" ng-options="hourMinutes.name for hourMinutes in times" required>
				</select>
			</div>
		</div>

		<!-- Periodic Booking hour slot, dates and periodicity -->
		<div class="row" ng-if="editedBooking.is_periodic === true">
			<div class="six cell">
				<label class="four cell form-label"><i18n>rbs.booking.edit.slot.start.label</i18n></label>
				<select class="three cell" ng-model="editedBooking.startTime" ng-options="hourMinutes.name for hourMinutes in times" required>
				</select>
				<label class="one cell form-label"><i18n>rbs.booking.edit.end.hour</i18n></label>
				<select class="three cell" ng-model="editedBooking.endTime" ng-options="hourMinutes.name for hourMinutes in times" required>
				</select>
			</div>
			<hr />

			<div class="four cell">
				<label class="six cell form-label"><i18n>rbs.booking.edit.start.label</i18n></label>
				<date-picker class="six cell" ng-model="editedBooking.startDate" ng-change="showDate = true" required></date-picker>
			</div>
			<div class="eight cell">
				<div class="row">
					<label class="one cell">&nbsp;</label>
					<label class="one cell form-label"><i18n>rbs.booking.edit.period.end.label</i18n></label>
					<input class="cell" type="radio" name="periodic_after" data-ng-model="editedBooking.byOccurrences" ng-value="true" checked />
					<label class="two cell form-label"><i18n>rbs.booking.edit.period.end.after</i18n></label>
					<select class="two cell" ng-model="editedBooking.occurrences" ng-options="occurrence for occurrence in periods.occurrences">
					</select>
					<label class="three cell form-label"><i18n>rbs.booking.edit.period.end.occurrences</i18n></label>
				</div>
				<hr />

				<div class="row">
					<label class="two cell">&nbsp;</label>
					<input class="cell" type="radio" name="periodic_after" data-ng-model="editedBooking.byOccurrences" ng-value="false" />
					<label class="two cell form-label"><i18n>rbs.booking.edit.period.end.on</i18n></label>
					<date-picker class="three cell" ng-model="editedBooking.periodicEndDate" ng-change="showDate = true"></date-picker>
				</div>
			</div>
			<hr />

			<div class="row">
				<label class="three cell form-label"><i18n>rbs.booking.edit.period.label</i18n></label>
				<select class="one cell" ng-model="editedBooking.periodicity" ng-options="periodicity for periodicity in periods.periodicities" required>
				</select>
				<label class="two cell form-label"><i18n>rbs.booking.edit.period.unit</i18n></label>
			</div>
			<hr />

			<div class="row">
				<label class="cell form-element" ng-repeat="periodDay in editedBooking.periodDays">
					<span>
						<i18n ng-if="periodDay.number == 1">rbs.booking.edit.period.days.1</i18n>
						<i18n ng-if="periodDay.number == 2">rbs.booking.edit.period.days.2</i18n>
						<i18n ng-if="periodDay.number == 3">rbs.booking.edit.period.days.3</i18n>
						<i18n ng-if="periodDay.number == 4">rbs.booking.edit.period.days.4</i18n>
						<i18n ng-if="periodDay.number == 5">rbs.booking.edit.period.days.5</i18n>
						<i18n ng-if="periodDay.number == 6">rbs.booking.edit.period.days.6</i18n>
						<i18n ng-if="periodDay.number == 0">rbs.booking.edit.period.days.0</i18n>
					</span>
					<input type="checkbox" ng-model="periodDay.value" name="day_[[periodDay.number]]" value="false">
				</label>
			</div>
			<hr />
		</div>
		<hr />

		<div class="row form-element">
			<label class="twelve cell"><i18n>rbs.booking.edit.reason.label</i18n></label>
			<textarea ng-model="editedBooking.booking_reason"></textarea>
		</div>
		<hr />

		<div class="warning form-element" ng-repeat="actionError in currentErrors" translate content="[[actionError.error]]">
		</div>
		<hr />

		<div class="row">
			<behaviour name="contrib" resource="editedBooking.resource">
				<button class="right-magnet" ng-click="saveBooking()" ng-if="display.processing !== true"><i18n>rbs.save</i18n></button>
			</behaviour>
			<input type="button" class="cancel right-magnet" i18n-value="cancel" ng-click="closeBooking()" ng-if="display.processing !== true" />

			<button class="right-magnet cancel disabled" disabled ng-if="display.processing === true"><i18n>rbs.processing</i18n></button>
		</div>
	</article>
</div>