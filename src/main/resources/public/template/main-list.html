<table class="list-view colored">
	<thead>
		<tr>
			<th><input type="checkbox" ng-model="display.selectAllBookings" ng-change="switchSelectAllBookings()" /></th>
			<th></th>
			<th><a ng-click="switchSortBy('owner_name')" ng-class="{selected: sort.predicate === 'owner_name'}"><i18n>rbs.booking.headers.owner</i18n></a></th>
			<th><a ng-click="switchSortBy('resource.name')" ng-class="{selected: sort.predicate === 'resource.name'}"><i18n>rbs.booking.headers.resource</i18n></a></th>
			<th><a ng-click="switchSortBy('start_date')" ng-class="{selected: sort.predicate === 'start_date'}"><i18n>rbs.booking.headers.start_date</i18n></a></th>
			<th><a ng-click="switchSortBy('end_date')" ng-class="{selected: sort.predicate === 'end_date'}"><i18n>rbs.booking.headers.end_date</i18n></a></th>
			<th><a ng-click="switchSortBy('booking_reason')" ng-class="{selected: sort.predicate === 'booking_reason'}"><i18n>rbs.booking.headers.reason</i18n></a></th>
			<th colspan="2"><a ng-click="switchSortBy('status')" ng-class="{selected: sort.predicate === 'status'}"><i18n>rbs.booking.headers.status</i18n></a></th>
		</tr>
	</thead>
	<tbody ng-repeat="booking in bookings.filter(filterList) | orderBy:sort.predicate:sort.reverse">
		<tr>
			<td><input type="checkbox" ng-model="booking.selected" ng-change="switchSelectAllSlots(booking)"/></td>
			<td>
				<a ng-if="booking.is_periodic === true && booking.expanded !== true" ng-click="expandPeriodicBooking(booking)"><span class="badge">+</span></a>
				<a ng-if="booking.is_periodic === true && booking.expanded === true" ng-click="collapsePeriodicBooking(booking)"><span class="badge">-</span></a>
			</td>
			<td><a ng-click="viewBooking(booking)">[[booking.owner_name]]</a></td>
			<td ng-class="booking.color"><a ng-click="viewBooking(booking)">[[booking.resource.name]]</a></td>
			<td><a ng-click="viewBooking(booking)">[[formatMoment(booking.startMoment)]]</a></td>
			<td><a ng-click="viewBooking(booking)">[[formatMoment(booking.endMoment)]]</a></td>
			<td><a ng-click="viewBooking(booking)">[[trimReason(booking.booking_reason)]]</a></td>
			<td>
				<a ng-click="viewBooking(booking)" ng-if="booking.status === status.STATE_CREATED"><i18n>rbs.booking.status.created</i18n></a>
				<a ng-click="viewBooking(booking)" ng-if="booking.status === status.STATE_VALIDATED"><i18n>rbs.booking.status.validated</i18n></a>
				<a ng-click="viewBooking(booking)" ng-if="booking.status === status.STATE_REFUSED"><i18n>rbs.booking.status.refused</i18n></a>
				<a ng-click="viewBooking(booking)" ng-if="booking.status === status.STATE_PARTIAL"><i18n>rbs.booking.status.partial</i18n></a>
			</td>
			<td><span ng-if="booking.resource.is_available !== true" class="long-badge"><i18n>rbs.booking.resource.unavailable</i18n></span></td>
		</tr>
		<tr ng-repeat="slot in booking.slots">
			<td class="invisible"></td>
			<td><input type="checkbox" ng-model="slot.selected" /></td>
			<td></td>
			<td ng-class="booking.color"></td>
			<td><a ng-click="viewBooking(booking)">[[formatMoment(slot.startMoment)]]</a></td>
			<td><a ng-click="viewBooking(booking)">[[formatMoment(slot.endMoment)]]</a></td>
			<td><a ng-click="viewBooking(booking)">[[booking.booking_reason]]</a></td>
			<td>
				<a ng-click="viewBooking(booking)" ng-if="slot.status === status.STATE_CREATED"><i18n>rbs.booking.status.created</i18n></a>
				<a ng-click="viewBooking(booking)" ng-if="slot.status === status.STATE_VALIDATED"><i18n>rbs.booking.status.validated</i18n></a>
				<a ng-click="viewBooking(booking)" ng-if="slot.status === status.STATE_REFUSED"><i18n>rbs.booking.status.refused</i18n></a>
			</td>
			<td></td>
		</tr>
	</tbody>
	<tbody ng-if="bookings.empty() === true">
		<tr><td colspan="9" class="invisible"><i18n>rbs.bookings.empty</i18n></td></tr>
	</tbody>
</table>