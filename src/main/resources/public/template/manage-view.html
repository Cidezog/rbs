<!-- Lightbox -->
<div ng-if="display.showPanel">
	<lightbox-plus show="display.showPanel" on-close="closeActionErrors()">
		<container template="lightbox"></container>
	</lightbox-plus>
</div>

<section class="cell three">
	<h1>RÃ©servation de ressources</h1>
	<nav class="vertical row">
		<h2><i18n>rbs.manage.types</i18n></h2>
		<ul>
			<li ng-repeat="resourceType in resourceTypes.all">
				<a ng-click="selectResourceType(resourceType)" ng-class="{ selected: resourceType === currentResourceType }">[[resourceType.name]]</a>
			</li>
		</ul>
	</nav>

	<hr />

</section>

<section class="cell nine">
	<div class="row">
		<div workflow="rbs.typemanage" class="row">
			<button ng-click="newResourceType()"><i18n>rbs.manage.type.create</i18n></button>
		</div>

		<div class="display-buttons">
			<i class="show-list" ng-click="showMain()"></i>
			<i class="show-icons" ng-click="showMain()"></i>
			<i class="show-admin selected" ng-click="showManage()" ng-if="hasWorkflowOrAnyResourceHasBehaviour('rbs.typemanage', 'publish')"></i>
		</div>
	</div>
	<div class="row">
		<container template="resources"></container>
	</div>
</section>

<!-- Lightbox : Thread share -->
<div ng-if="display.showPanel">
	<lightbox show="display.showPanel" on-close="display.showPanel = false;">
		<share-panel app-prefix="'rbs'" resources="currentResourceType"></share-panel>
	</lightbox>
</div>

<section class="toggle-buttons" ng-class="{ hide: (currentResourceType === undefined || currentResourceType.resources.selection().length === 0) }">
	<div class="toggle block-container">
		<div class="row">
			<behaviour name="process" resource="currentResourceType">
				<button ng-if="currentResourceType.resources.selection().length === 1"
						ng-click="editSelectedResource()">
					<i18n>rbs.manage.resource.edit</i18n>
				</button>
				<button ng-if="currentResourceType.resources.selection().length > 1"
						disabled class="disabled">
					<i18n>rbs.manage.resource.edits</i18n>
				</button>
			</behaviour>
			<behaviour name="manage" resource="currentResourceType">
				<button ng-if="currentResourceType.resources.selection().length === 1"
						ng-click="deleteResourcesSelection()">
					<i18n>rbs.manage.resource.remove</i18n>
				</button>
				<button ng-if="currentResourceType.resources.selection().length > 1"
						ng-click="deleteResourcesSelection()">
					<i18n>rbs.manage.resource.removes</i18n>
				</button>
			</behaviour>
		</div>
	</div>
</section>